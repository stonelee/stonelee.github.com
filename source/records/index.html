<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Records</title>
    <link rel="stylesheet" href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css" />
    <style type="text/css">
      dd {
        text-indent: 2em;
        margin-top: 10px;
        margin-bottom: 10px;
      }
    </style>
</head>
<body>
  <div class="container">
    <h1 style="text-align:center;">Records</h1>
    <h2>2012年</h2>
    <ul>
      <li>
        <h3><a href="2012-08.html">8月</a></h3>
        <hr />
      </li>
      <li>
        <h3><a href="2012-09.html">9月</a></h3>
        <hr />
        <dl>
          <dt>完成了人生中的一件大事：结婚。</dt>
          <dd>我和老婆的两个导师竟然专程开车过来参加结婚典礼，实在是太荣幸了！刚开学没几天，不是周末，4、5个小时车程，就为了过来给我们的喜事作个见证，师恩难忘！！</dd>
          <dd>还有好几个同学也来了，检讨来的时候都下午了，连婚宴都没赶上，在家里吃了点喜饺^-^</dd>
          <dd>之后跑昆明，丽江玩了一个星期，算是蜜月啦</dd>
        </dl>
        <dl>
          <dt>工作</dt>
          <dd>主要将前端svg系统跟后端进行联调，顺便优化了下交互逻辑，比之前清爽多了～</dd>
          <dd>之前svg的currentScale在webkit上实现不能，导致chrome，乃至Android，iPhone都不能正常运行。本来一直期待chrome团队能给个解释，都等了快一年了还是没信。这次终于下狠心，参考svg-editor进行了重新实现，计划加入到下个版本中。</dd>
          <dd>尝试将svg系统移植到移动设备上，发觉移动设备和传统浏览器在交互上还是有很大的不同啊，比如touch事件，比如mouseover事件，比如鼠标滚轮...还是针对移动端进行定制开发比较靠谱。</dd>
        </dl>
        <dl>
          <dt>其他</dt>
          <dd>利用晚上时间看完了<a href="http://book.douban.com/subject/7056800/">《Ruby元编程》</a>这本书，学到了各种魔法技巧，希望可以有机会订制自己的DSL。</dd>
        </dl>
      </li>
      <li>
        <h3><a href="2012-10.html">10月</a></h3>
        <hr />
        <dl>
          <dt>主要在之前应用经验基础上对kjsvg库进行重构</dt>
          <dd>在项目过程中发现，Bootstrap在IE下的表现相当的不尽如人意，与ASV协同使用时甚至会导致CPU瞬间占用100%，造成IE崩溃。最终痛下决心还是使用jqueryui代替，顺便重构了前端界面。</dd>
          <dd>对kjsvg库底层进行重构，core提供svg加载、DOM操作和事件处理，常用功能分模块开发，各模块在kjsvg中统一组装供业务层调用，未来针对不同业务应用可能要配置不同的kjsvg。</dd>
          <dd>重新梳理组件库架构，所有组件继承于control类，使用集合controls来控制。控件之间使用Class库实现继承。</dd>
          <dd>重构之后，项目结构更加合理，对未来功能开发更有信心！欧耶！</dd>
        </dl>
      </li>
      <li>
        <h3><a href="2012-11.html">11月</a></h3>
        <hr />
        <dl>
          <dt>开始妄图构建自己的前端框架!</dt>
          <dd>领导要求对原来基于Extjs的项目的运行速度进行优化，然而经过多层面反复调优效果依然不明显，尤其对于老旧IE来说。痛定思痛，Extjs界面对于企业开发来说非常专业，就开发速度来说也是一流的，但是其使用js生成一切的想法，在IE面前纯粹是在搞笑，而且封装着实紧密，进行功能扩展着实有点束手束脚。因此萌生了借鉴Ext的UI自己封装模块的想法。</dd>
          <dd>首先用了一周时间将常用界面元素从Ext中抽出，本着KISS原则，同时考虑一定的业务扩展性，借鉴之前了解的<a href="http://smacss.com/">smacss</a>、<a href="http://oocss.org/">OOCSS</a>，很快完成了任务。</dd>
          <dd>然后对常用组件进行js封装，基于<a href="http://aralejs.org/">arale项目</a>，目前已经完成Tree、TreeGrid、Tab，Accordion、Grid，本着持续集成的想法搭建了集成框架，效果不错。</dd>
          <blockquote><p>基于一流模块，而不是框架，针对自己的业务需求，订制通用内部模块，搭建自己的前端集成构建流水线。</p></blockquote>
        </dl>
        <dl>
          <dt>开源</dt>
          <dd>学习使用<a href="https://github.com/spmjs/spm">spm</a>打包部署的方法，发觉alipay团队真心给力，发现问题后在github上提一下<a href="https://github.com/spmjs/spm/issues/created_by/stonelee">issues</a>，开发人员往往在几小时之内就能给予答复，怒赞！</dd>
          <dd>第一次提交Pull Request并被采纳，还是vim插件 <a href="https://github.com/maksimr/vim-jsbeautify/pull/10">vim-jsbeautify</a>。很惭愧用了两年的vim，对于其插件开发还是一知半解，了解一下还是挺有意思的。</dd>
          <dd>Open Source的人真是挺nice的，分享使人快乐！</dd>
        </dl>
        <dl>
          <dt>其他</dt>
          <dd>kjsvg项目解决了直接载入svg文件的问题，极大的扩展了系统的想象空间，例如控件不失真缩放、底图分步加载、各系统作为插件独立加载等。</dd>
          <dd>终于下决心开始看 <a href="http://book.douban.com/subject/10549733/">犀牛书</a>，对自己的js知识体系进行查缺补漏，作为一名靠谱的前端，这貌似是必须的吧。截至月底第一部分“JavaScript语言核心”达成！</dd>
          <dd>虽然整天看英语文档，但是感觉词汇量还是自己的短板，找到一个 <a href="http://www.shanbay.com/">好网站</a>，希望能够坚持下去。</dd>
        </dl>
      </li>
      <li>
        <h3><a href="2012-12.html">12月</a></h3>
        <hr />
        <dl>
          <dt>信息化系统前端框架</dt>
          <dd>完成弹出窗口dialog，实现标题栏拖动，封装alert，confirm，show三种常用样式方便调用。</dd>
          <dd>基于
            <a href="http://aralejs.org/calendar/">calendar</a>
            封装日期选择控件date-picker，可以基于页面配置直接autoRender</dd>
          <dd>完成下拉选择控件choose的基本功能，调用悬浮组件layer进行展示，为后面各种复杂下拉查询选择做准备。目前已经实现静态指定项的下拉选择和基本的后端json数据选择功能。</dd>
          <dd>重新设计表单中控件的布局方式。原来采用Ext的table布局方式，结构变更比较繁琐；现在借鉴
            <a href="http://twitter.github.com/bootstrap/scaffolding.html#gridSystem">bootstrap的布局方式</a>
            ，使用row来布局行，span布局列，针对常用列宽指定不同class，并优化各种控件的显示宽度</dd>
          <dd>借鉴
            <a href="http://stonelee.info/notes/_build/html/css/regulate.html">Mozilla的规范</a>
            对已完成的css属性的顺序进行调整，规范了Hacks方法。</dd>
          <dd>重构css样式，使用
            <a href="http://lesscss.org/">LESS</a>
            封装常用CSS属性。目前保证框架在Chrome、Firefox以及IE8以上浏览器中可用。</dd>
          <dd>完成下拉选择控件，多选控件，自定义下拉控件，工具条，多级菜单，多选树的css样式</dd>
          <dd>通读Arale底层四大模块
            <a href="http://aralejs.org/class/">class</a>、
            <a href="http://aralejs.org/base/">base</a>、
            <a href="http://aralejs.org/events/">events</a>、
            <a href="http://aralejs.org/widget/">widget</a>
            的源码、测试用例。</dd>
        </dl>
        <dl>
          <dt>svg图形展示系统</dt>
          <dd>实现了多应用系统的统一配置、管理、展现、编辑等功能。</dd>
          <dd>原来的keydown事件响应使用jquery.hotkeys.js库，后来发现采用这种方法附加的按键事件会互相影响，而且绑定后无法单独取消。经研究发现这是因为其没有考虑svg独有的document问题。因此重写了按键事件响应代码，目前可以绑定Del，Esc两个键盘事件，并可以分别解除绑定。从而解决了原来系统的按键冲突bug。</dd>
          <dd>将拖动图元改变其位置的功能合并到系统中，当拖动完毕时通过自定义事件触发来保存坐标位置到后端数据库中。</dd>
          <dd>与后端同事讨论登录权限验证问题。后端提供的REST接口无法调用session，因此无法使用传统的权限验证方式。为解决此问题，开始研究
            <a href="http://developers.douban.com/wiki/?title=oauth2">豆瓣网的开发平台API调用方式</a>。研究发现开发平台使用OAuth2方式向第三方平台提供接口，第三方平台需要事先申请API Key和Secret Code，然后使用API Key获取authorization_code，然后使用API Key，Secret Code以及authorization_code获取access_token，然后在所有的权限操作的header中添加Authorization:Bearer access_token，这样后端就能根据access_token安全的进行操作。这种权限验证方式是目前业界流行的规范，但是对于我们自己平台的REST调用来说有点繁琐，可以将流程进行梳理简化，从而应用于我们的平台接口调用过程中。</dd>
        </dl>
        <dl>
          <dt>其他</dt>
          <dd>读完<a href="http://book.douban.com/subject/4851107/">Hacking Vim 7.2</a>，重新整理了vimrc配置</dd>
          <dd>试用了下<a href="http://www.sencha.com/products/touch">Sencha Touch</a>，走了一遍<a href="http://phonegap.com/">PhoneGap</a>打包流程，使用这套东西开发个演示玩具貌似是挺简单的事情，但是作为产品方案的话还需要慎重考虑。</dd>
        </dl>
      </li>
    </ul>
    <h2>2013年</h2>
    <ul>
      <li>
        <h3><a href="2013-01.html">1月</a></h3>
        <hr />
        <dl>
          <dt>svg图形展示系统</dt>
          <dd>在对原有系统进行功能扩充的过程中发现，原有系统API设计不够完善，代码抽象也不够合理，导致高级功能开发比较困难，系统架构也不够灵活，适应性不强。因此开始在开源库中找寻解决思路。</dd>
          <dd><a href="http://raphaeljs.com/">Raphael</a>是一个相当成熟的SVG开源库，主要被用来做图表显示。它的核心优势是在低版本IE（IE6、7、8）中使用原生的VML，现代浏览器中（IE9、10，Chrome，Firfox等）中使用SVG，因此不需要安装其他插件就可以实现桌面浏览器中的图形显示。最大的问题是所有图形必须通过它的API动态生成，这样对于矿图展示来说初始加载速度会非常慢，因此之前没有选用。</dd>
          <dd>起初想借鉴参考其API设计，用于补充自己的kjsvg库。后来在研究其源代码时发现，其代码架构非常完整，包含许多高级图形处理功能，而且调用比较简单，业界用的比较多，因此考虑是否直接基于Raphael这个库作为我们图形展示系统的底层库进行开发。</dd>
          <dd>然而在研究过程中发现，IE下的vml实现貌似有问题。vml中图片放大两倍时浏览器内存占用也会变为两倍，从而在图片很大时直接导致系统卡死，另外还有一些其他问题，因此直接基于Raphael库作为图形展示系统的底层库这条思路可以说是失败了。</dd>
          <dd>因此采用第二套方案，就是借鉴Raphael的API设计，基于ASV插件实现IE下的SVG控制。这个方案本质上是对Raphael库的移植，难度主要在于要基本看懂这个库的主要代码，并按照我们系统的实际需求增加新的功能。</dd>
          <dd>在移植过程中，借助seajs对代码架构进行了重新设计，独立出matrix、set、color、pathtool、animate、easing、tool几个通用函数库，保证代码的高内聚低耦合。</dd>
          <dd>为了保证移植的正确性，采用mocha进行单元测试，优先覆盖项目所使用的API。</dd>
          <dd>期间还遇到几个源码中的bug，在官方issues中都有人已经搞定了。</dd>
          <dd>目前移植基本完成，功能扩充比较之前灵活了许多，但是由于多了一层抽象封装，性能依然不理想，要想投入实际应用还得继续研究。</dd>
          <dd>阅读<a href="http://book.douban.com/subject/4183808/">《高性能JavaScript》</a>相关章节，寻找JS代码优化的方法，试图解决操作不够流畅的问题。</dd>
        </dl>
        <dl>
          <dt>其他</dt>
          <dd>继续配置VIM，在家windows上也可以使用了。</dd>
        </dl>
      </li>
      <li>
        <h3><a href="2013-02.html">2月</a></h3>
        <hr />
        <dl>
          <dt>svg图形展示系统</dt>
          <dd>另一个部门项目也要使用本系统，但是需求与原来的功能设计偏差不小。因此需要对系统进行重构，并且提供订制化的解决方案。</dd>
        </dl>
        <dl>
          <dt>其他</dt>
          <dd>看完<a href="http://book.douban.com/subject/4183808/">《高性能JavaScript》</a>，
            <a href="http://book.douban.com/subject/2033768/">《批评中医》</a>，
            重新鼓起勇气看<a href="http://book.douban.com/subject/1885170/">《算法导论》</a>
          </dd>
          <dd>对node又一次起了兴趣。看了些 <a href="https://github.com/lepture/nico">nico</a>，
            <a href="https://github.com/madhums/nodejs-express-mongoose-demo">nodejs-express-mongoose-demo</a>的代码
          </dd>
          <dd>读了些源码<a href="https://github.com/documentcloud/underscore">underscore</a>，
            <a href="https://github.com/jquery/jquery">jquery</a>，pull了几个request，希望能采纳。
          </dd>
        </dl>
      </li>
      <li>
        <h3><a href="2013-03.html">3月</a></h3>
        <hr />
        <dl>
          <dt>kjsvg</dt>
          <dd>同时负责两个系统的svg接入工作，已经基本完成。</dd>
          <dd>IE9不支持svg动画，自己实现风扇转动</dd>
          <dd>实现动画队列</dd>
          <dd>找到更简单的轨迹移动方法</dd>
          <dd>实现宽度自适应</dd>
        </dl>
        <dl>
          <dt>kjui</dt>
          <dd>综合考虑维护扩展和实际使用的需要，对原来的extui框架架构进行了重新规划，更名为kjui</dd>
          <dd>将css部分独立出来，方便针对不同项目更换不同的样式。</dd>
          <dd>将每个组件作为一个仓库来维护，方便灵活调用，也有利于独立升级。</dd>
          <dd>对组件文档模板进行更改，目标是在局域网或者外网环境下都可以正常访问。</dd>
          <dd>最终结果是产生了好多库。简单罗列一下，有
            综合示例:
            <a href="https://github.com/stonelee/kjui-static-demo">kjui-static-demo</a>，
            基本组件:
            <a href="https://github.com/stonelee/kjui-accordion">kjui-accordion</a>，
            <a href="https://github.com/stonelee/kjui-date-picker">kjui-date-picker</a>，
            <a href="https://github.com/stonelee/kjui-dialog">kjui-dialog</a>，
            <a href="https://github.com/stonelee/kjui-grid">kjui-grid</a>，
            <a href="https://github.com/stonelee/kjui-tab">kjui-tab</a>，
            <a href="https://github.com/stonelee/kjui-tree">kjui-tree</a>，
            仿ExtJS样式:
            <a href="https://github.com/stonelee/kjui-extui">kjui-extui</a>，
            文档模板:
            <a href="https://github.com/stonelee/nico-arale">nico-kjui</a>，
            以及供外部调用访问的组件库:
            <a href="https://github.com/stonelee/kjui">kjui</a>，
          </dd>
        </dl>
        <dl>
          <dt>其他</dt>
          <dd>认识了几个牛人，看清了自己的不足，继续努力！</dd>
          <dd>为jquery，underscore提交了pull request，包括：
            <a href="https://github.com/jquery/jquery/commit/f2cb536127952a30a1b7edc34765e9e1313145e9">jquery 1</a>，
            <a href="https://github.com/jquery/jquery/commit/92b23673e60569b74ac48304579866c839008e1a">jquery 2</a>，
            <a href="https://github.com/documentcloud/underscore/pull/1027">underscore pull 1027</a>，
          目前都已经被merge了，还被列入了jquery authors，开心！</dd>
          <dd>给LP的小礼物: <a href="https://github.com/stonelee/love">love</a>, 并使用Phonegap打包成app</dd>
          <dd>总结遇到的CSS问题:<a href="https://github.com/stonelee/css-demo">css-demo</a></dd>
          <dd>使用socket.io做了一个简单的实时游戏: <a href="https://github.com/stonelee/realtime-game">realtime-game</a>，
          并部署到<a href="http://www.heroku.com/">heroku</a>中</dd>
        </dl>
      </li>
      <li>
        <h3><a href="2013-04.html">4月</a></h3>
        <hr />
        <dl>
          <dt>kjsvg</dt>
          <dd>终于完美解决自适应宽度、高度问题</dd>
          <dd>搞定IE下插件安装的检测方法</dd>
        </dl>
        <dl>
          <dt>kjui</dt>
          <dd>重构css样式，解决大量IE6的兼容性问题。目前测试浏览器为：IE6，IE8，Chrome</dd>
          <dd>kjui-grid增加分页显示控制，自动编号列，多选列，自定义按钮，数据量超过显示区域时出现滚动条</dd>
          <dd>kjui-tree包括多选，级联选择，复杂自定义级联选择，自定义图标等</dd>
          <dd>边开发边封装组件：<a href="https://github.com/stonelee/kjui-demo">kjui-demo</a>。Done is better than perfect!</dd>
        </dl>
        <dl>
          <dt>其他</dt>
          <dd>项目功能：按年显示的日历，要求需要区分工作日和休息日，并通过自动浮现按钮实现两种状态的切换。
          借助<a href="http://momentjs.com/">moment</a>轻松实现<a href="https://github.com/stonelee/year-calendar">year-calendar</a>。
          开发过程中尝试了下<a href="http://yeoman.io/">Yeoman</a>，
          以及三兄弟<a href="https://github.com/yeoman/yo">Yo</a>、<a href="http://gruntjs.com/">Grunt</a>
          和<a href="http://twitter.github.com/bower">Bower</a>，还有
          <a href="http://sass-lang.com/">sass</a>和<a href="http://compass-style.org/">Compass</a>，发现真是神器，值得进一步研究。
          </dd>
          <dd>imageMagick是神器，用来进行图形格式转换，各种裁剪拼接非常简单，而且是基于命令行的，太赞了！</dd>
          <dd>开始跟coursera网络课程<a href="https://class.coursera.org/algs4partI-002">Algorithms</a>，希望能够补上我的算法短板</dd>
          <dd>忽然发现兼容IE6也不是太难的事情啊！</dd>
        </dl>
      </li>
      <li>
        <h3><a href="2013-05.html">5月</a></h3>
        <hr />
        <dl>
          <dt>kjui</dt>
          <dd>kjui-grid采用新的定宽方法，可以显示复杂表头</dd>
          <dd>kjui-tree直接继承于grid组件</dd>
          <dd>kjui-dialog增加静态方法form，方便直接弹出表单窗口，并默认使用autoRenderAll来将所有组件实例化</dd>
          <dd>kjui-calendar自动将一般的input变成日历组件，增加时间选择功能，解决点击页面组件不消失的问题</dd>
          <dd>使用<a href="https://github.com/spmjs/spm2">spm2</a>进行发布</dd>
        </dl>
        <dl>
          <dt>其它</dt>
          <dd>研究响应式框架<a href="http://foundation.zurb.com/">foundation</a>，适合开发Mobile First的应用</dd>
          <dd>研究Google的标记式前端开发框架<a href="http://angularjs.org/">angular</a>，适合开发单页面CRUD</dd>
        </dl>
      </li>
    </ul>
  </div>
</body>
</html>
